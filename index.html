<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Amana Finance ‚Äî –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–∞—Å—Å—Ä–æ—á–∫–∏</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * {margin:0;padding:0;box-sizing:border-box;}
    body {
      font-family:'Inter',sans-serif;
      background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      min-height:100vh;display:flex;align-items:center;justify-content:center;
      padding:20px;position:relative;overflow-x:hidden;
    }
    .calculator {
      width:100%;max-width:500px;background:#fff;border-radius:24px;padding:32px;
      box-shadow:0 20px 40px rgba(0,0,0,0.1);
    }
    .header{text-align:center;margin-bottom:32px;}
    .header .title{font-size:28px;font-weight:800;color:#116234;margin-bottom:8px;}
    .header .subtitle{font-size:14px;color:#64748B;font-weight:500;text-transform:uppercase;}
    .tariff-buttons{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:32px;}
    .tariff-button{padding:16px;background:#f8fafc;border:2px solid transparent;border-radius:16px;
      cursor:pointer;text-align:center;font-weight:600;font-size:14px;color:#64748B;transition:all 0.3s;}
    .tariff-button.active{background:linear-gradient(135deg,#95C11F,#116234);color:#fff;}
    label{display:block;margin-bottom:8px;font-weight:600;font-size:14px;color:#1E293B;}
    input[type="number"]{width:100%;padding:16px 20px;font-size:16px;font-weight:500;
      border:2px solid #E2E8F0;border-radius:12px;background:#f8fafc;}
    .slider{width:100%;height:8px;border-radius:4px;background:#E2E8F0;outline:none;cursor:pointer;}
    .output{background:#f1fdf4;border:2px solid #bbf7d0;padding:24px;border-radius:16px;margin:24px 0;}
    .output p{margin:12px 0;font-size:15px;display:flex;justify-content:space-between;}
    .output-value{font-weight:700;font-size:16px;color:#15803D;}
    .buttons{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:32px;}
    .btn{padding:16px 24px;border-radius:12px;text-align:center;font-weight:600;font-size:15px;border:none;cursor:pointer;}
    .btn-whatsapp{background:linear-gradient(135deg,#25D366,#128C7E);color:#fff;}
    .btn-call{background:linear-gradient(135deg,#116234,#95C11F);color:#fff;}
    .error-message{background:#FED7AA;color:#EA580C;padding:12px 16px;border-radius:10px;
      font-size:13px;font-weight:500;margin-top:8px;display:none;}
    .helper-text{background:#FEF7ED;color:#EA580C;padding:12px 16px;border-radius:10px;font-size:13px;font-weight:500;margin-top:16px;}
    @media(max-width:768px){.buttons{grid-template-columns:1fr;}.tariff-buttons{grid-template-columns:1fr;}}
  </style>
</head>
<body>
  <div class="calculator">
    <div class="header">
      <div class="title">AMANA FINANCE</div>
      <div class="subtitle">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–∞—Å—Å—Ä–æ—á–∫–∏</div>
    </div>

    <div class="tariff-buttons">
      <div class="tariff-button active" data-tariff="with">–° –ø–µ—Ä–≤—ã–º –≤–∑–Ω–æ—Å–æ–º</div>
      <div class="tariff-button" data-tariff="without">–ë–µ–∑ –ø–µ—Ä–≤–æ–≥–æ –≤–∑–Ω–æ—Å–∞</div>
    </div>

    <div class="input-group">
      <label for="price">–°—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–∞</label>
      <input type="number" id="price" placeholder="–Ω–µ –º–µ–Ω–µ–µ 50 000 ‚ÇΩ" min="0"/>
      <div class="error-message" id="errorMessage">‚ö†Ô∏è –°—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 50 000‚ÇΩ</div>
    </div>

    <div class="input-group">
      <label for="months" id="monthsLabel">–°—Ä–æ–∫: 3 –º–µ—Å—è—Ü–∞</label>
      <input type="range" id="months" class="slider" min="3" max="12" value="3"/>
    </div>

    <div id="prepaymentBlock" class="input-group">
      <label for="prepaymentSlider">–ü–µ—Ä–≤—ã–π –≤–∑–Ω–æ—Å</label>
      <input type="number" id="prepaymentInput" step="100" placeholder="0"/>
      <div class="error-message" id="prepaymentError"></div>
      <input type="range" id="prepaymentSlider" class="slider" min="0" max="0" step="100" value="0"/>
    </div>

    <div class="output" id="results">
      <p><strong>–ü–µ—Ä–≤—ã–π –≤–∑–Ω–æ—Å:</strong><span class="output-value">0 ‚ÇΩ</span></p>
      <p><strong>–ï–∂–µ–º–µ—Å—è—á–Ω—ã–π –ø–ª–∞—Ç—ë–∂:</strong><span class="output-value">0 ‚ÇΩ</span></p>
      <p><strong>–°—Ç–æ–∏–º–æ—Å—Ç—å —Å –Ω–∞—Ü–µ–Ω–∫–æ–π:</strong><span class="output-value">0 ‚ÇΩ</span></p>
      <p><strong>–ù–∞—Ü–µ–Ω–∫–∞:</strong><span class="output-value">0 ‚ÇΩ (0%)</span></p>
    </div>

    <div class="helper-text">üí° –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è: –ü–æ—Ä—É—á–∏—Ç–µ–ª—å –∏ –ø–∞—Å–ø–æ—Ä—Ç–∞ –æ–±–µ–∏—Ö –ª–∏—Ü</div>

    <div class="buttons">
      <a id="whatsapp" class="btn btn-whatsapp" href="#" target="_blank">‚úçÔ∏è WhatsApp</a>
      <a class="btn btn-call" href="tel:+79280222114">üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å</a>
    </div>
  </div>

  <script>
    const priceInput = document.getElementById('price');
    const monthsInput = document.getElementById('months');
    const monthsLabel = document.getElementById('monthsLabel');
    const prepaymentSlider = document.getElementById('prepaymentSlider');
    const prepaymentInput = document.getElementById('prepaymentInput');
    const prepaymentError = document.getElementById('prepaymentError');
    const resultsDiv = document.getElementById('results');
    const whatsappBtn = document.getElementById('whatsapp');
    const errorMessage = document.getElementById('errorMessage');
    const tariffButtons = document.querySelectorAll('.tariff-button');

    let selectedTariff = 'with';

    const markupWithDown = {3:9,4:12,5:15,6:18,7:20,8:22,9:24,10:26,11:28,12:30};
    const markupWithoutDown = {3:13,4:17,5:21,6:25.5,7:28.5,8:32,9:35,10:38,11:41.5,12:45};
    const markupNoDownPayment = {3:14,4:18,5:23,6:28,7:31,8:34,9:37,10:40,11:43,12:46};
    const roundUpTo100 = val => Math.ceil(val / 100) * 100;

    function updateCalculator(resetPrepayment = false) {
      let months = parseInt(monthsInput.value);
      const price = parseInt(priceInput.value) || 0;

      // === –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–µ–≤ –ø–æ —Å—É–º–º–µ ===
      let maxMonths = 12;
      if (price < 50000) maxMonths = 6;
      else if (price >= 50000 && price < 100000) maxMonths = 9;
      else maxMonths = 12;

      monthsInput.max = maxMonths;
      if (months > maxMonths) {
        months = maxMonths;
        monthsInput.value = maxMonths;
      }
      // ====================================

      const monthText = months < 5 ? '–º–µ—Å—è—Ü–∞' : '–º–µ—Å—è—Ü–µ–≤';
      monthsLabel.textContent = `–°—Ä–æ–∫: ${months} ${monthText}`;

      if (isNaN(price) || price < 50000) {
        errorMessage.style.display = 'block';
        resultsDiv.innerHTML = '<p><strong>–ü–µ—Ä–≤—ã–π –≤–∑–Ω–æ—Å:</strong><span class="output-value">0 ‚ÇΩ</span></p><p><strong>–ï–∂–µ–º–µ—Å—è—á–Ω—ã–π –ø–ª–∞—Ç—ë–∂:</strong><span class="output-value">0 ‚ÇΩ</span></p><p><strong>–°—Ç–æ–∏–º–æ—Å—Ç—å —Å –Ω–∞—Ü–µ–Ω–∫–æ–π:</strong><span class="output-value">0 ‚ÇΩ</span></p><p><strong>–ù–∞—Ü–µ–Ω–∫–∞:</strong><span class="output-value">0 ‚ÇΩ (0%)</span></p>';
        whatsappBtn.href = "https://wa.me/79280222114?text=–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, —Ö–æ—á—É –æ—Ñ–æ—Ä–º–∏—Ç—å —Ä–∞—Å—Å—Ä–æ—á–∫—É.";
        return;
      } else errorMessage.style.display = 'none';

      const percent = selectedTariff === 'with' ? markupWithDown[months] : markupNoDownPayment[months];
      const finalCost = price * (1 + percent / 100);
      const monthly = roundUpTo100(finalCost / months);
      const markup = finalCost - price;
      const markupPercent = Math.round((markup / price) * 100);

      resultsDiv.innerHTML = `
        <p><strong>–ü–µ—Ä–≤—ã–π –≤–∑–Ω–æ—Å:</strong><span class="output-value">0 ‚ÇΩ</span></p>
        <p><strong>–ï–∂–µ–º–µ—Å—è—á–Ω—ã–π –ø–ª–∞—Ç—ë–∂:</strong><span class="output-value">${monthly.toLocaleString()} ‚ÇΩ</span></p>
        <p><strong>–°—Ç–æ–∏–º–æ—Å—Ç—å —Å –Ω–∞—Ü–µ–Ω–∫–æ–π:</strong><span class="output-value">${finalCost.toLocaleString()} ‚ÇΩ</span></p>
        <p><strong>–ù–∞—Ü–µ–Ω–∫–∞:</strong><span class="output-value">${markup.toLocaleString()} ‚ÇΩ (${markupPercent}%)</span></p>`;
      whatsappBtn.href = `https://wa.me/79280222114?text=${encodeURIComponent(`–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, —Ö–æ—á—É –æ—Ñ–æ—Ä–º–∏—Ç—å —Ä–∞—Å—Å—Ä–æ—á–∫—É. –°—Ç–æ–∏–º–æ—Å—Ç—å: ${price.toLocaleString()} ‚ÇΩ, —Å—Ä–æ–∫ ${months} –º–µ—Å.`)}`;
    }

    tariffButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        tariffButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        selectedTariff = btn.dataset.tariff;
        updateCalculator(true);
      });
    });

    priceInput.addEventListener('input', () => updateCalculator(true));
    monthsInput.addEventListener('input', () => updateCalculator(true));

    updateCalculator(true);
  </script>
</body>
</html>
